https://speakerdeck.com/marchin1989/yasasikuru-men-suruoauth2-dot-0
https://studyco.connpass.com/event/265222/

# 認証と認可の違い

認証
- 誰であるかを確認すること
- 例: Webサービスのログイン。行政サービス、携帯の契約、本人限定郵便 etcでの本人確認。

認可
- 権限の割り当てを行うこと。
- 例: 電車の切符。ディズニーランドの入園チケット。


認可を取得するために、認証をすることがあるので、混同しやすいが、認証と認可は別物。


OAuth2.0は認可の仕組み

# OAuth2.0のよくあるつまづきポイント


# OAuth2.0はなぜ必要？

ユーザー、自作アプリ、カレンダーAPIがあったときにどうやってカレンダーの操作をするのか。

A. ユーザーがクレデンシャルを自作アプリに渡して、APIにアクセスする？
-> 問題がある。

じゃあクレデンシャルを渡さずどうする?


権限のスコープを絞って有効期限ありにして自作アプリに渡す。OAuth2.0の考え方。

# OAuth2.0とは


# OAuth2.0のメリット
- サードパーティアプリに、ユーザのクレデンシャルを教える必要がない。
- もし悪意あるサードパーティアプリだったとしても、限定的なアクセス（閲覧のみなど)しか許可していないため、被害の範囲を抑えられる。
- アクセストークンの漏洩はありうるが、ユーザーのクレデンシャルを渡すよりも、影響は限定的。
- アクセストークンが有効かどうかで権限を管理できる。

# OAuth2.0の登場人物（ロール）
- リソースオーナー
- クライアント
	- パブリッククライアント。
		クライアントの認証情報(クライアントID、クライアントシークレット)を安全に保存できない。Webアプリや、ネイティブアプリ
	- コンフィデンシャルクライアント
		クライアントの認証情報を安全に保存できる。サーバサイドアプリ
		※ OAuthに関してはサーバサイドアプリも「クライアント」
- 認可サーバ
- リソースサーバ
	- API。アクセストークンを検証することで、リソースを提供する。

クライアントの認証情報とは？
	認可サーバーとのやり取りの際に、OAuthクライアント自体の識別や、認証に利用される情報。
	※ リソースオーナー（エンドユーザー）の認証情報ではないので注意。
	- クライアントID
	- クライアントシークレット


# OAuth2.0の認可グラント
1. [[認可コードグラント]]
2. [[インプリシットグラント]]
3. [[リソースオーナーパスワードクレデンシャルグラント]]
4. [[クライアントクレデンシャルグラント]]

難しい部分。

# クライアントの意味を混同しやすい

# ブラウザを経由して、行ったり来たりしている
なぜブラウザを経由する
認可リクエストの時にクライアント内で、ユーザーのクレデンシャルを入力してしまうと、クライアントにユーザーのクレ電車流が渡ってしまう。必然的にクライアント外（ブラウザ）でやり取りせざるを得ない.

# 認可のための仕組みと言いつつ、認証が出てくる。

# アクセストークンの他にも認可コードやリフレッシュトークンといったものが出てくる