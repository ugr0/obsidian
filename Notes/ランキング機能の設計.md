http://www.code-magagine.com/?p=15064

## ランキングの特徴

-   ReadよりもWriteの割合が圧倒的に多い

## RDBで実装

MySQLでスコアのカラムにインデックスを貼ればReadは早くできるが、Write時のindexのツリーを更新するのに時間がかかるため、ランキングのようなWriteが圧倒的に多い処理ではあまり適さないです。

## Redisで実装

RedisのSorted SetはSkip Listというデータ構造を採用している。この構造では、登録時に乱択アルゴリズムを使用するので、MySQLのB-treeのようにインデックスツリーのバランシングをする必要がないため平均的に高速になる。

また、ランキングは「ユーザー+スコア」という簡単なデータ集合なのでKVSであるRedisがまさに適している。

## 注意点

Redisを用いた場合は、データが消えてしまうという可能性も大いにあるためランキング追加時にはMySQLとRedisの両方にデータを追加するなどデータ消失時に対応できるような対策が別途必要になる。